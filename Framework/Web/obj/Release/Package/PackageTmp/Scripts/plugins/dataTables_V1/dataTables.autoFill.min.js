/*! AutoFill 1.2.1
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(n,t,i){var r=function(r,u){"use strict";var f=function(n,t){if(!(this instanceof f))throw"Warning: AutoFill must be initialised with the keyword 'new'";if(!r.fn.dataTableExt.fnVersionCheck("1.7.0"))throw"Warning: AutoFill requires DataTables 1.7 or greater";return this.c={},this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:!1},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]},this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null},this.fnSettings=function(){return this.s},this._fnInit(n,t),this};return f.prototype={_fnInit:function(n,i){var e=this,o,h,s;this.s.dt=u.Api?new u.Api(n).settings()[0]:n.fnSettings();this.s.init=i||{};this.dom.table=this.s.dt.nTable;r.extend(!0,this.c,f.defaults,i);this._initColumns();o=r("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=o[0];this.s.filler.height=o.height();this.s.filler.width=o.width();o[0].style.display="none";s=t.body;e.s.dt.oScroll.sY!==""&&(e.s.dt.nTable.parentNode.style.position="relative",s=e.s.dt.nTable.parentNode);h=r("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=h.clone().appendTo(s)[0];this.dom.borderRight=h.clone().appendTo(s)[0];this.dom.borderBottom=h.clone().appendTo(s)[0];this.dom.borderLeft=h.clone().appendTo(s)[0];o.on("mousedown.DTAF",function(n){return this.onselectstart=function(){return!1},e._fnFillerDragStart.call(e,n),!1});r("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(n){e._fnFillerDisplay.call(e,n)});r(this.dom.table).on("destroy.dt.DTAF",function(){o.off("mousedown.DTAF").remove();r("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){for(var o=this,u=this.s.dt,e=this.s.init,t,n=0,i=u.aoColumns.length;n<i;n++)this.s.columns[n]=r.extend(!0,{},f.defaults.column);for(u.oApi._fnApplyColumnDefs(u,e.aoColumnDefs||e.columnDefs,e.aoColumns||e.columns,function(n,t){o._fnColumnOptions(n,t)}),n=0,i=u.aoColumns.length;n<i;n++)t=this.s.columns[n],t.read||(t.read=this._fnReadCell),t.write||(t.read=this._fnWriteCell),t.step||(t.read=this._fnStep)},_fnColumnOptions:function(n,t){var u=this.s.columns[n],r=function(n,r){t[r[0]]!==i&&(u[n]=t[r[0]]);t[r[1]]!==i&&(u[n]=t[r[1]])};r("enable",["bEnable","enable"]);r("read",["fnRead","read"]);r("write",["fnWrite","write"]);r("step",["fnStep","step"]);r("increment",["bIncrement","increment"])},_fnTargetCoords:function(n){var t=r(n).parents("tr")[0],i=this.s.dt.oInstance.fnGetPosition(n);return{x:r("td",t).index(n),y:r("tr",t.parentNode).index(t),row:i[0],column:i[2]}},_fnUpdateBorder:function(n,t){var e=this.s.border.width,u=r(n).offset(),f=r(t).offset(),o=u.left-e,c=f.left+r(t).outerWidth(),s=u.top-e,a=f.top+r(t).outerHeight(),l=f.left+r(t).outerWidth()-u.left+2*e,v=f.top+r(t).outerHeight()-u.top+2*e,i;if(u.left>f.left&&(o=f.left-e,c=u.left+r(n).outerWidth(),l=u.left+r(n).outerWidth()-f.left+2*e),this.s.dt.oScroll.sY!==""){var h=r(this.s.dt.nTable.parentNode).offset(),y=r(this.s.dt.nTable.parentNode).scrollTop(),p=r(this.s.dt.nTable.parentNode).scrollLeft();o-=h.left-p;c-=h.left-p;s-=h.top-y;a-=h.top-y}i=this.dom.borderTop.style;i.top=s+"px";i.left=o+"px";i.height=this.s.border.width+"px";i.width=l+"px";i=this.dom.borderBottom.style;i.top=a+"px";i.left=o+"px";i.height=this.s.border.width+"px";i.width=l+"px";i=this.dom.borderLeft.style;i.top=s+"px";i.left=o+"px";i.height=v+"px";i.width=this.s.border.width+"px";i=this.dom.borderRight.style;i.top=s+"px";i.left=c+"px";i.height=v+"px";i.width=this.s.border.width+"px"},_fnFillerDragStart:function(i){var u=this,f=this.dom.currentTarget,e;this.s.drag.dragging=!0;u.dom.borderTop.style.display="block";u.dom.borderRight.style.display="block";u.dom.borderBottom.style.display="block";u.dom.borderLeft.style.display="block";e=this._fnTargetCoords(f);this.s.drag.startX=e.x;this.s.drag.startY=e.y;this.s.drag.startTd=f;this.s.drag.endTd=f;this._fnUpdateBorder(f,f);r(t).bind("mousemove.AutoFill",function(n){u._fnFillerDragMove.call(u,n)});r(t).bind("mouseup.AutoFill",function(n){u._fnFillerFinish.call(u,n)});this.s.screen.y=i.pageY;this.s.screen.height=r(n).height();this.s.screen.scrollTop=r(t).scrollTop();this.s.dt.oScroll.sY!==""&&(this.s.scroller.top=r(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+r(this.s.dt.nTable.parentNode).height());this.s.screen.interval=setInterval(function(){var n=r(t).scrollTop(),i=n-u.s.screen.scrollTop;u.s.screen.y+=i;u.s.screen.height-u.s.screen.y+n<50?r("html, body").animate({scrollTop:n+50},240,"linear"):u.s.screen.y-n<50&&r("html, body").animate({scrollTop:n-50},240,"linear");u.s.dt.oScroll.sY!==""&&(u.s.screen.y>u.s.scroller.bottom-50?r(u.s.dt.nTable.parentNode).animate({scrollTop:r(u.s.dt.nTable.parentNode).scrollTop()+50},240,"linear"):u.s.screen.y<u.s.scroller.top+50&&r(u.s.dt.nTable.parentNode).animate({scrollTop:r(u.s.dt.nTable.parentNode).scrollTop()-50},240,"linear"))},250)},_fnFillerDragMove:function(n){var i,u;n.target&&n.target.nodeName.toUpperCase()=="TD"&&n.target!=this.s.drag.endTd&&(i=this._fnTargetCoords(n.target),this.c.mode=="y"&&i.x!=this.s.drag.startX&&(n.target=r("tbody>tr:eq("+i.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]),this.c.mode=="x"&&i.y!=this.s.drag.startY&&(n.target=r("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+i.x+")",this.dom.table)[0]),this.c.mode=="either"&&(i.x!=this.s.drag.startX?n.target=r("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+i.x+")",this.dom.table)[0]:i.y!=this.s.drag.startY&&(n.target=r("tbody>tr:eq("+i.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0])),this.c.mode!=="both"&&(i=this._fnTargetCoords(n.target)),u=this.s.drag,u.endTd=n.target,i.y>=this.s.drag.startY?this._fnUpdateBorder(u.startTd,u.endTd):this._fnUpdateBorder(u.endTd,u.startTd),this._fnFillerPosition(n.target));this.s.screen.y=n.pageY;this.s.screen.scrollTop=r(t).scrollTop();this.s.dt.oScroll.sY!==""&&(this.s.scroller.scrollTop=r(this.s.dt.nTable.parentNode).scrollTop(),this.s.scroller.top=r(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+r(this.s.dt.nTable.parentNode).height())},_fnFillerFinish:function(){var y=this,i,p,n,a,w;r(t).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=!1;clearInterval(this.s.screen.interval);var s=[],c=this.dom.table,f=this._fnTargetCoords(this.s.drag.startTd),e=this._fnTargetCoords(this.s.drag.endTd),l=function(n){return y.s.dt.oApi._fnVisibleToColumnIndex(y.s.dt,n)};if(f.y<=e.y)for(i=f.y;i<=e.y;i++)if(f.x<=e.x)for(n=f.x;n<=e.x;n++)s.push({node:r("tbody>tr:eq("+i+")>td:eq("+n+")",c)[0],x:n-f.x,y:i-f.y,colIdx:l(n)});else for(n=f.x;n>=e.x;n--)s.push({node:r("tbody>tr:eq("+i+")>td:eq("+n+")",c)[0],x:n-f.x,y:i-f.y,colIdx:l(n)});else for(i=f.y;i>=e.y;i--)if(f.x<=e.x)for(n=f.x;n<=e.x;n++)s.push({node:r("tbody>tr:eq("+i+")>td:eq("+n+")",c)[0],x:n-f.x,y:i-f.y,colIdx:l(n)});else for(n=f.x;n>=e.x;n--)s.push({node:r("tbody>tr:eq("+i+")>td:eq("+n+")",c)[0],x:f.x-n,y:f.y-i,colIdx:l(n)});if(!(s.length<=1)){for(a=[],i=0,p=s.length;i<p;i++){var o=s[i],h=this.s.columns[o.colIdx],b=h.read.call(h,o.node),v=h.step.call(h,o.node,b,w,i,o.x,o.y);h.write.call(h,o.node,v);w=v;a.push({cell:o,colIdx:o.colIdx,newValue:v,oldValue:b})}this.c.complete!==null&&this.c.complete.call(this,a);u.Api?new u.Api(this.s.dt).draw(!1):this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(n){var i=this.dom.filler,t,u;if(!this.s.drag.dragging){if(t=n.target.nodeName.toLowerCase()=="td"?n.target:r(n.target).parents("td")[0],u=this._fnTargetCoords(t).column,!this.s.columns[u].enable){i.style.display="none";return}n.type=="mouseover"?(this.dom.currentTarget=t,this._fnFillerPosition(t),i.style.display="block"):n.relatedTarget&&n.relatedTarget.className.match(/AutoFill/)||(i.style.display="none")}},_fnFillerPosition:function(n){var t=r(n).offset(),i=this.dom.filler;i.style.top=t.top-this.s.filler.height/2-1+r(n).outerHeight()+"px";i.style.left=t.left-this.s.filler.width/2-1+r(n).outerWidth()+"px"}},u.AutoFill=f,u.AutoFill=f,f.version="1.2.1",f.defaults={mode:"y",complete:null,column:{enable:!0,increment:!0,read:function(n){return r(n).html()},write:function(n,t){var e=r(n).parents("table"),i,f;u.Api?e.DataTable().cell(n).data(t):(i=e.dataTable(),f=i.fnGetPosition(n),i.fnUpdate(t,f[0],f[2],!1))},step:function(n,t,r,u,f,e){var o=/(\-?\d+)/,s=this.increment&&r?r.match(o):null;return s?r.replace(o,parseInt(s[1],10)+(f<0||e<0?-1:1)):r===i?t:r}}},f};typeof define=="function"&&define.amd?define(["jquery","datatables"],r):typeof exports=="object"?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.AutoFill&&r(jQuery,jQuery.fn.dataTable)})(window,document);
//# sourceMappingURL=dataTables.autoFill.min.js.map
