/*! ColVis 1.1.2
 * ©2010-2015 SpryMedia Ltd - datatables.net/license
 */
(function(n,t,i){var r=function(n){"use strict";var r=function(t,i){this.CLASS&&this.CLASS=="ColVis"||alert("Warning: ColVis must be initialised with the keyword 'new'");typeof i=="undefined"&&(i={});var u=n.fn.dataTable.camelToHungarian;return u&&(u(r.defaults,r.defaults,!0),u(r.defaults,i)),this.s={dt:null,oInit:i,hidden:!0,abOriginal:[]},this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null},r.aInstances.push(this),this.s.dt=n.fn.dataTable.Api?new n.fn.dataTable.Api(t).settings()[0]:t,this._fnConstruct(i),this};return r.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var n=this.dom.buttons.length-1;n>=0;n--)this.dom.collection.removeChild(this.dom.buttons[n]);this.dom.buttons.splice(0,this.dom.buttons.length);this.dom.groupButtons.splice(0,this.dom.groupButtons.length);this.dom.restore&&this.dom.restore.parentNode(this.dom.restore);this._fnAddGroups();this._fnAddButtons();this._fnDrawCallback()},_fnConstruct:function(i){this._fnApplyCustomisation(i);var r=this,u,f;for(this.dom.wrapper=t.createElement("div"),this.dom.wrapper.className="ColVis",this.dom.button=n("<button />",{"class":this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton ui-button ui-state-default":"ColVis_Button ColVis_MasterButton"}).append("<span>"+this.s.buttonText+"<\/span>").bind(this.s.activate=="mouseover"?"mouseover":"click",function(n){n.preventDefault();r._fnCollectionShow()}).appendTo(this.dom.wrapper)[0],this.dom.catcher=this._fnDomCatcher(),this.dom.collection=this._fnDomCollection(),this.dom.background=this._fnDomBackground(),this._fnAddGroups(),this._fnAddButtons(),u=0,f=this.s.dt.aoColumns.length;u<f;u++)this.s.abOriginal.push(this.s.dt.aoColumns[u].bVisible);this.s.dt.aoDrawCallback.push({fn:function(){r._fnDrawCallback.call(r)},sName:"ColVis"});n(this.s.dt.oInstance).bind("column-reorder.dt",function(n,t,i){for(u=0,f=r.s.aiExclude.length;u<f;u++)r.s.aiExclude[u]=i.aiInvertMapping[r.s.aiExclude[u]];var e=r.s.abOriginal.splice(i.iFrom,1)[0];r.s.abOriginal.splice(i.iTo,0,e);r.fnRebuild()});n(this.s.dt.oInstance).bind("destroy.dt",function(){n(r.dom.wrapper).remove()});this._fnDrawCallback()},_fnApplyCustomisation:function(t){var u,f,i,e;if(n.extend(!0,this.s,r.defaults,t),!this.s.showAll&&this.s.bShowAll&&(this.s.showAll=this.s.sShowAll),!this.s.restore&&this.s.bRestore&&(this.s.restore=this.s.sRestore),u=this.s.groups,f=this.s.aoGroups,u)for(i=0,e=u.length;i<e;i++)u[i].title&&(f[i].sTitle=u[i].title),u[i].columns&&(f[i].aiColumns=u[i].columns)},_fnDrawCallback:function(){for(var s,h,t,c,u=this.s.dt.aoColumns,o=this.dom.buttons,f=this.s.aoGroups,r,e=0,l=o.length;e<l;e++)r=o[e],r.__columnIdx!==i&&n("input",r).prop("checked",u[r.__columnIdx].bVisible);for(s=function(n){for(var t=0,i=n.length;t<i;t++)if(u[n[t]].bVisible===!1)return!1;return!0},h=function(n){for(var t=0,i=n.length;t<i;t++)if(u[n[t]].bVisible===!0)return!1;return!0},t=0,c=f.length;t<c;t++)s(f[t].aiColumns)?(n("input",this.dom.groupButtons[t]).prop("checked",!0),n("input",this.dom.groupButtons[t]).prop("indeterminate",!1)):h(f[t].aiColumns)?(n("input",this.dom.groupButtons[t]).prop("checked",!1),n("input",this.dom.groupButtons[t]).prop("indeterminate",!1)):n("input",this.dom.groupButtons[t]).prop("indeterminate",!0)},_fnAddGroups:function(){var n,t,i;if(typeof this.s.aoGroups!="undefined")for(t=0,i=this.s.aoGroups.length;t<i;t++)n=this._fnDomGroupButton(t),this.dom.groupButtons.push(n),this.dom.buttons.push(n),this.dom.collection.appendChild(n)},_fnAddButtons:function(){var t,r=this.s.dt.aoColumns,i,u;if(n.inArray("all",this.s.aiExclude)===-1)for(i=0,u=r.length;i<u;i++)n.inArray(i,this.s.aiExclude)===-1&&(t=this._fnDomColumnButton(i),t.__columnIdx=i,this.dom.buttons.push(t));this.s.order==="alpha"&&this.dom.buttons.sort(function(n,t){var i=r[n.__columnIdx].sTitle,u=r[t.__columnIdx].sTitle;return i===u?0:i<u?-1:1});this.s.restore&&(t=this._fnDomRestoreButton(),t.className+=" ColVis_Restore",this.dom.buttons.push(t));this.s.showAll&&(t=this._fnDomShowXButton(this.s.showAll,!0),t.className+=" ColVis_ShowAll",this.dom.buttons.push(t));this.s.showNone&&(t=this._fnDomShowXButton(this.s.showNone,!1),t.className+=" ColVis_ShowNone",this.dom.buttons.push(t));n(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var t=this,i=this.s.dt;return n('<li class="ColVis_Special '+(i.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"<\/li>").click(function(){for(var n=0,i=t.s.abOriginal.length;n<i;n++)t.s.dt.oInstance.fnSetColumnVis(n,t.s.abOriginal[n],!1);t._fnAdjustOpenRows();t.s.dt.oInstance.fnAdjustColumnSizing(!1);t.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomShowXButton:function(t,i){var r=this,u=this.s.dt;return n('<li class="ColVis_Special '+(u.bJUI?"ui-button ui-state-default":"")+'">'+t+"<\/li>").click(function(){for(var n=0,t=r.s.abOriginal.length;n<t;n++)r.s.aiExclude.indexOf(n)===-1&&r.s.dt.oInstance.fnSetColumnVis(n,i,!1);r._fnAdjustOpenRows();r.s.dt.oInstance.fnAdjustColumnSizing(!1);r.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomGroupButton:function(t){var r=this,u=this.s.dt,i=this.s.aoGroups[t];return n('<li class="ColVis_Special '+(u.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+i.sTitle+"<\/span><\/label><\/li>").click(function(t){var f=!n("input",this).is(":checked"),u;for(t.target.nodeName.toLowerCase()!=="li"&&(f=!f),u=0;u<i.aiColumns.length;u++)r.s.dt.oInstance.fnSetColumnVis(i.aiColumns[u],f)})[0]},_fnDomColumnButton:function(t){var i=this,u=this.s.dt.aoColumns[t],r=this.s.dt,f=this.s.fnLabel===null?u.sTitle:this.s.fnLabel(t,u.sTitle,u.nTh);return n("<li "+(r.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+f+"<\/span><\/label><\/li>").click(function(u){var f=!n("input",this).is(":checked"),e;u.target.nodeName.toLowerCase()!=="li"&&(u.target.nodeName.toLowerCase()=="input"||i.s.fnStateChange===null)&&(f=!f);e=n.fn.dataTableExt.iApiIndex;n.fn.dataTableExt.iApiIndex=i._fnDataTablesApiIndex.call(i);r.oFeatures.bServerSide?(i.s.dt.oInstance.fnSetColumnVis(t,f,!1),i.s.dt.oInstance.fnAdjustColumnSizing(!1),(r.oScroll.sX!==""||r.oScroll.sY!=="")&&i.s.dt.oInstance.oApi._fnScrollDraw(i.s.dt),i._fnDrawCallback()):i.s.dt.oInstance.fnSetColumnVis(t,f);n.fn.dataTableExt.iApiIndex=e;i.s.fnStateChange!==null&&(u.target.nodeName.toLowerCase()=="span"&&u.preventDefault(),i.s.fnStateChange.call(i,t,f))})[0]},_fnDataTablesApiIndex:function(){for(var n=0,t=this.s.dt.oInstance.length;n<t;n++)if(this.s.dt.oInstance[n]==this.s.dt.nTable)return n;return 0},_fnDomCollection:function(){return n("<ul />",{"class":this.s.dt.bJUI?"ColVis_collection ui-buttonset ui-buttonset-multi":"ColVis_collection"}).css({display:"none",opacity:0,position:this.s.bCssPosition?"":"absolute"})[0]},_fnDomCatcher:function(){var r=this,i=t.createElement("div");return i.className="ColVis_catcher",n(i).click(function(){r._fnCollectionHide.call(r,null,null)}),i},_fnDomBackground:function(){var t=this,i=n("<div><\/div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){t._fnCollectionHide.call(t,null,null)});return this.s.activate=="mouseover"&&i.mouseover(function(){t.s.overcollection=!1;t._fnCollectionHide.call(t,null,null)}),i[0]},_fnCollectionShow:function(){var e=this,o,s=n(this.dom.button).offset(),i=this.dom.collection,u=this.dom.background,f=parseInt(s.left,10),l=parseInt(s.top+n(this.dom.button).outerHeight(),10),r;if(this.s.bCssPosition||(i.style.top=l+"px",i.style.left=f+"px"),n(i).css({display:"block",opacity:0}),u.style.bottom="0px",u.style.right="0px",r=this.dom.catcher.style,r.height=n(this.dom.button).outerHeight()+"px",r.width=n(this.dom.button).outerWidth()+"px",r.top=s.top+"px",r.left=f+"px",t.body.appendChild(u),t.body.appendChild(i),t.body.appendChild(this.dom.catcher),n(i).animate({opacity:1},e.s.iOverlayFade),n(u).animate({opacity:.1},e.s.iOverlayFade,"linear",function(){n.browser&&n.browser.msie&&n.browser.version=="6.0"&&e._fnDrawCallback()}),!this.s.bCssPosition){o=this.s.sAlign=="left"?f:f-n(i).outerWidth()+n(this.dom.button).outerWidth();i.style.left=o+"px";var h=n(i).outerWidth(),a=n(i).outerHeight(),c=n(t).width();o+h>c&&(i.style.left=c-h+"px")}this.s.hidden=!1},_fnCollectionHide:function(){var i=this;this.s.hidden||this.dom.collection===null||(this.s.hidden=!0,n(this.dom.collection).animate({opacity:0},i.s.iOverlayFade,function(){this.style.display="none"}),n(this.dom.background).animate({opacity:0},i.s.iOverlayFade,function(){t.body.removeChild(i.dom.background);t.body.removeChild(i.dom.catcher)}))},_fnAdjustOpenRows:function(){for(var t=this.s.dt.aoOpenRows,i=this.s.dt.oApi._fnVisbleColumns(this.s.dt),n=0,r=t.length;n<r;n++)t[n].nTr.getElementsByTagName("td")[0].colSpan=i}},r.fnRebuild=function(t){var u=null,i,f;for(typeof t!="undefined"&&(u=n.fn.dataTable.Api?new n.fn.dataTable.Api(t).table().node():t.fnSettings().nTable),i=0,f=r.aInstances.length;i<f;i++)(typeof t=="undefined"||u==r.aInstances[i].s.dt.nTable)&&r.aInstances[i].fnRebuild()},r.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:!1,sRestore:"Restore original",bShowAll:!1,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:!1,aoGroups:[],order:"column"},r.aInstances=[],r.prototype.CLASS="ColVis",r.VERSION="1.1.2",r.prototype.VERSION=r.VERSION,typeof n.fn.dataTable=="function"&&typeof n.fn.dataTableExt.fnVersionCheck=="function"&&n.fn.dataTableExt.fnVersionCheck("1.7.0")?n.fn.dataTableExt.aoFeatures.push({fnInit:function(n){var t=n.oInit,i=new r(n,t.colVis||t.oColVis||{});return i.button()},cFeature:"C",sFeature:"ColVis"}):alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download"),n.fn.dataTable.ColVis=r,n.fn.DataTable.ColVis=r,r};typeof define=="function"&&define.amd?define(["jquery","datatables"],r):typeof exports=="object"?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColVis&&r(jQuery,jQuery.fn.dataTable)})(window,document);
//# sourceMappingURL=dataTables.colVis.min.js.map
